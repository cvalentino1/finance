<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>QUANTUM FINANCE — Master Dashboard</title>

<!-- PWA Meta Tags -->
<link rel="manifest" href="./manifest.json">
<meta name="theme-color" content="#D4A934">
<meta name="background-color" content="#0A0A0A">
<meta name="application-name" content="QuantumFin">
<meta name="description" content="24 interactive financial engines — NPV, Black-Scholes, Monte Carlo, CAPM, and more.">

<!-- iOS PWA Support -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="QuantumFin">
<link rel="apple-touch-icon" href="./icon-192.png">

<!-- Windows -->
<meta name="msapplication-TileColor" content="#0A0A0A">
<meta name="msapplication-TileImage" content="./icon-192.png">

<!-- Icons -->
<link rel="icon" type="image/png" sizes="192x192" href="./icon-192.png">
<link rel="icon" type="image/png" sizes="512x512" href="./icon-512.png">

<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600;700&family=JetBrains+Mono:wght@300;400;500&family=Outfit:wght@200;300;400;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --gold:#D4A934;--gold-light:#F5D77A;--gold-dim:#8B7328;
  --bg:#0A0A0A;--bg2:#111111;--bg3:#1A1A1A;--bg4:#222222;
  --text:#E8E0D0;--text-dim:#887E6E;--border:#2A2520;
  --glow:rgba(212,169,52,0.15);--glow-strong:rgba(212,169,52,0.35);
}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Outfit',sans-serif;font-weight:300;overflow-x:hidden;min-height:100vh;padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}

/* PWA Install Banner */
.pwa-banner{position:fixed;bottom:0;left:0;right:0;z-index:200;background:var(--bg2);border-top:1px solid var(--gold-dim);padding:14px 20px;display:none;align-items:center;justify-content:space-between;gap:12px;backdrop-filter:blur(20px);animation:slideUp .4s ease}
@keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
.pwa-banner .pwa-info{display:flex;align-items:center;gap:12px}
.pwa-banner .pwa-icon{width:40px;height:40px;border-radius:10px;border:1px solid var(--gold-dim)}
.pwa-banner .pwa-text{font-size:13px;color:var(--text)}
.pwa-banner .pwa-text small{display:block;font-size:11px;color:var(--text-dim);margin-top:2px}
.pwa-banner .pwa-actions{display:flex;gap:8px}
.pwa-install-btn{padding:8px 20px;background:linear-gradient(135deg,var(--gold-dim),var(--gold));color:#0A0A0A;border:none;border-radius:6px;font-family:'Outfit',sans-serif;font-size:12px;font-weight:600;letter-spacing:1px;text-transform:uppercase;cursor:pointer;transition:all .3s}
.pwa-install-btn:hover{box-shadow:0 0 20px var(--glow-strong)}
.pwa-dismiss{background:none;border:1px solid var(--border);color:var(--text-dim);padding:8px 14px;border-radius:6px;font-family:'Outfit',sans-serif;font-size:12px;cursor:pointer;transition:all .3s}
.pwa-dismiss:hover{border-color:var(--text-dim);color:var(--text)}

/* Offline indicator */
.offline-bar{position:fixed;top:0;left:0;right:0;z-index:300;background:#8B2500;color:white;text-align:center;padding:6px;font-size:12px;letter-spacing:1px;display:none;font-family:'JetBrains Mono',monospace}
.offline-bar.show{display:block}

/* Scrollbar */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--gold-dim);border-radius:3px}

/* Particle Canvas */
#particles{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none;opacity:0.4}

/* Top Bar */
.topbar{position:fixed;top:0;left:0;right:0;z-index:100;display:flex;align-items:center;justify-content:space-between;padding:12px 32px;background:rgba(10,10,10,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border)}
.topbar .logo{font-family:'Cormorant Garamond',serif;font-size:22px;font-weight:700;color:var(--gold);letter-spacing:4px;text-transform:uppercase}
.topbar .logo span{color:var(--text-dim);font-weight:300;font-size:13px;letter-spacing:2px;margin-left:12px;font-family:'Outfit',sans-serif}
.topbar-nav{display:flex;gap:8px}
.topbar-nav button{background:none;border:1px solid transparent;color:var(--text-dim);font-family:'Outfit',sans-serif;font-size:12px;padding:6px 14px;border-radius:4px;cursor:pointer;transition:all .3s;letter-spacing:1px;text-transform:uppercase}
.topbar-nav button:hover,.topbar-nav button.active{color:var(--gold);border-color:var(--gold-dim)}

/* Layout */
.dashboard{position:relative;z-index:1;padding:80px 24px 40px;max-width:1500px;margin:0 auto}

/* Section Headers */
.section-header{display:flex;align-items:center;gap:16px;margin:40px 0 20px;padding-bottom:12px;border-bottom:1px solid var(--border)}
.section-header h2{font-family:'Cormorant Garamond',serif;font-size:28px;font-weight:600;color:var(--gold);letter-spacing:2px}
.section-header .line{flex:1;height:1px;background:linear-gradient(90deg,var(--gold-dim),transparent)}
.section-header .tag{font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(--text-dim);background:var(--bg3);padding:4px 12px;border-radius:20px}

/* Card Grid */
.card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(420px,1fr));gap:20px;margin-bottom:20px}

/* Cards */
.card{background:var(--bg2);border:1px solid var(--border);border-radius:12px;overflow:hidden;transition:all .4s cubic-bezier(.22,1,.36,1);position:relative}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--gold-dim),transparent);opacity:0;transition:opacity .4s}
.card:hover{border-color:var(--gold-dim);transform:translateY(-2px);box-shadow:0 8px 32px rgba(0,0,0,.4),0 0 60px var(--glow)}
.card:hover::before{opacity:1}

.card-head{display:flex;align-items:center;justify-content:space-between;padding:16px 20px 12px;border-bottom:1px solid var(--border)}
.card-head h3{font-family:'Cormorant Garamond',serif;font-size:18px;font-weight:600;color:var(--gold-light);letter-spacing:1px}
.card-head .formula-tag{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text-dim);background:var(--bg);padding:3px 10px;border-radius:20px;border:1px solid var(--border)}

.card-body{padding:16px 20px}

/* Form Elements */
.input-row{display:flex;gap:10px;margin-bottom:10px;flex-wrap:wrap}
.input-group{flex:1;min-width:120px}
.input-group label{display:block;font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--text-dim);margin-bottom:4px;font-family:'JetBrains Mono',monospace}
.input-group input,.input-group select{width:100%;background:var(--bg);border:1px solid var(--border);color:var(--text);padding:8px 12px;border-radius:6px;font-family:'JetBrains Mono',monospace;font-size:13px;transition:border-color .3s}
.input-group input:focus,.input-group select:focus{outline:none;border-color:var(--gold);box-shadow:0 0 12px var(--glow)}

.calc-btn{width:100%;padding:10px;margin-top:8px;background:linear-gradient(135deg,var(--gold-dim),var(--gold));color:#0A0A0A;border:none;border-radius:6px;font-family:'Outfit',sans-serif;font-size:13px;font-weight:600;letter-spacing:2px;text-transform:uppercase;cursor:pointer;transition:all .3s;position:relative;overflow:hidden}
.calc-btn::after{content:'';position:absolute;top:50%;left:50%;width:0;height:0;background:rgba(255,255,255,0.2);border-radius:50%;transform:translate(-50%,-50%);transition:width .6s,height .6s}
.calc-btn:hover::after{width:300px;height:300px}
.calc-btn:hover{box-shadow:0 0 24px var(--glow-strong)}

.result-box{margin-top:12px;padding:12px 16px;background:var(--bg);border:1px solid var(--border);border-radius:8px;font-family:'JetBrains Mono',monospace;font-size:14px;min-height:42px;display:flex;align-items:center;gap:8px;transition:all .4s}
.result-box.has-value{border-color:var(--gold-dim);background:rgba(212,169,52,0.05)}
.result-box .result-label{font-size:10px;color:var(--text-dim);letter-spacing:1px;text-transform:uppercase}
.result-box .result-value{color:var(--gold-light);font-size:16px;font-weight:500}

/* Chart Area */
.chart-area{margin-top:12px;background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:12px;height:180px;position:relative;overflow:hidden}
.chart-area canvas{width:100%!important;height:100%!important}

/* Category Tabs */
.cat-tabs{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:20px}
.cat-tab{padding:8px 20px;background:var(--bg2);border:1px solid var(--border);border-radius:30px;font-size:12px;letter-spacing:1px;text-transform:uppercase;color:var(--text-dim);cursor:pointer;transition:all .3s;font-family:'Outfit',sans-serif}
.cat-tab:hover{border-color:var(--gold-dim);color:var(--text)}
.cat-tab.active{background:linear-gradient(135deg,rgba(212,169,52,0.15),rgba(212,169,52,0.05));border-color:var(--gold);color:var(--gold)}

/* Monte Carlo special */
.mc-canvas{width:100%;height:220px;background:var(--bg);border:1px solid var(--border);border-radius:8px;margin-top:10px}

/* Hero */
.hero{text-align:center;padding:40px 20px 20px;position:relative}
.hero h1{font-family:'Cormorant Garamond',serif;font-size:52px;font-weight:300;color:var(--gold);letter-spacing:6px;text-transform:uppercase;line-height:1.1}
.hero h1 strong{font-weight:700;display:block;font-size:64px;background:linear-gradient(135deg,var(--gold-light),var(--gold),var(--gold-dim));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text-dim);font-size:14px;letter-spacing:3px;text-transform:uppercase;margin-top:12px}
.hero .pulse{width:8px;height:8px;background:var(--gold);border-radius:50%;display:inline-block;margin-right:8px;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1;box-shadow:0 0 0 0 var(--glow-strong)}50%{opacity:.7;box-shadow:0 0 0 12px transparent}}

/* Stats Bar */
.stats-bar{display:flex;justify-content:center;gap:40px;padding:20px;margin-bottom:20px;flex-wrap:wrap}
.stat{text-align:center}
.stat .num{font-family:'Cormorant Garamond',serif;font-size:36px;font-weight:700;color:var(--gold)}
.stat .lbl{font-size:10px;letter-spacing:3px;text-transform:uppercase;color:var(--text-dim);margin-top:2px}

/* Dynamic Inputs */
.dynamic-inputs{display:flex;flex-direction:column;gap:6px;max-height:160px;overflow-y:auto;padding-right:4px;margin-bottom:8px}
.dynamic-row{display:flex;gap:8px;align-items:center}
.dynamic-row input{flex:1}
.dynamic-row .remove-btn{background:none;border:1px solid #442222;color:#884444;width:26px;height:26px;border-radius:4px;cursor:pointer;font-size:14px;display:flex;align-items:center;justify-content:center;transition:all .3s}
.dynamic-row .remove-btn:hover{background:#331111;border-color:#884444}
.add-btn{background:var(--bg3);border:1px dashed var(--border);color:var(--text-dim);padding:6px 12px;border-radius:6px;font-size:11px;cursor:pointer;transition:all .3s;font-family:'Outfit',sans-serif;letter-spacing:1px}
.add-btn:hover{border-color:var(--gold-dim);color:var(--gold)}

/* Multi-result */
.multi-result{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:12px}
.mini-result{padding:8px 12px;background:var(--bg);border:1px solid var(--border);border-radius:6px}
.mini-result .mr-label{font-size:9px;letter-spacing:1.5px;text-transform:uppercase;color:var(--text-dim);font-family:'JetBrains Mono',monospace}
.mini-result .mr-value{font-family:'JetBrains Mono',monospace;font-size:14px;color:var(--gold-light);margin-top:2px}

/* Responsive */
@media(max-width:900px){
  .card-grid{grid-template-columns:1fr}
  .hero h1{font-size:36px}
  .hero h1 strong{font-size:44px}
}

/* Fade in animation */
.card{animation:fadeUp .6s ease both}
@keyframes fadeUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
.card:nth-child(2){animation-delay:.05s}
.card:nth-child(3){animation-delay:.1s}
.card:nth-child(4){animation-delay:.15s}
.card:nth-child(5){animation-delay:.2s}
.card:nth-child(6){animation-delay:.25s}
</style>
</head>
<body>

<div class="offline-bar" id="offlineBar">⚡ OFFLINE MODE — All computations available locally</div>

<div class="pwa-banner" id="pwaBanner">
  <div class="pwa-info">
    <img src="./icon-192.png" class="pwa-icon" alt="QF">
    <div class="pwa-text">
      Install <strong style="color:var(--gold)">Quantum Finance</strong>
      <small>Full offline access · All 24 engines · Zero latency</small>
    </div>
  </div>
  <div class="pwa-actions">
    <button class="pwa-dismiss" onclick="dismissInstall()">Later</button>
    <button class="pwa-install-btn" onclick="installPWA()">Install App</button>
  </div>
</div>

<canvas id="particles"></canvas>

<div class="topbar">
  <div class="logo">QUANTUM <span>Finance Engine v4.0</span></div>
  <div class="topbar-nav">
    <button class="active" onclick="filterCards('all')">All Modules</button>
    <button onclick="filterCards('valuation')">Valuation</button>
    <button onclick="filterCards('risk')">Risk</button>
    <button onclick="filterCards('derivatives')">Derivatives</button>
    <button onclick="filterCards('corporate')">Corporate</button>
    <button onclick="filterCards('debt')">Debt</button>
    <button onclick="filterCards('simulation')">Simulation</button>
  </div>
</div>

<div class="dashboard">
  <div class="hero">
    <h1>Master<strong>Dashboard</strong></h1>
    <p><span class="pulse"></span> 24 Financial Engines Online — Real-time Computation</p>
  </div>

  <div class="stats-bar">
    <div class="stat"><div class="num">24</div><div class="lbl">Active Models</div></div>
    <div class="stat"><div class="num">∞</div><div class="lbl">Simulations</div></div>
    <div class="stat"><div class="num">0.01s</div><div class="lbl">Compute Time</div></div>
    <div class="stat"><div class="num">100%</div><div class="lbl">Precision</div></div>
  </div>

  <!-- ========== VALUATION ========== -->
  <div class="section-header"><h2>Valuation & Time Value</h2><div class="line"></div><div class="tag">Core</div></div>
  <div class="card-grid">

    <!-- NPV -->
    <div class="card" data-cat="valuation">
      <div class="card-head"><h3>Net Present Value</h3><div class="formula-tag">NPV = Σ CFₜ/(1+r)ᵗ</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Discount Rate (%)</label><input type="number" id="npv-rate" value="10" step="0.1"></div>
          <div class="input-group"><label>Initial Investment</label><input type="number" id="npv-init" value="100000"></div>
        </div>
        <label style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--text-dim);font-family:'JetBrains Mono',monospace;margin-bottom:4px;display:block">Cash Flows (per year)</label>
        <div class="dynamic-inputs" id="npv-cfs">
          <div class="dynamic-row"><input type="number" value="30000" class="npv-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="35000" class="npv-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="40000" class="npv-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="45000" class="npv-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
        </div>
        <button class="add-btn" onclick="addCF('npv-cfs','npv-cf',25000)">+ Add Year</button>
        <button class="calc-btn" onclick="calcNPV()">Compute NPV</button>
        <div class="result-box" id="npv-result"><span class="result-label">Awaiting computation…</span></div>
      </div>
    </div>

    <!-- IRR -->
    <div class="card" data-cat="valuation">
      <div class="card-head"><h3>Internal Rate of Return</h3><div class="formula-tag">NPV(IRR)=0</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Initial Investment</label><input type="number" id="irr-init" value="100000"></div>
        </div>
        <label style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--text-dim);font-family:'JetBrains Mono',monospace;margin-bottom:4px;display:block">Cash Flows</label>
        <div class="dynamic-inputs" id="irr-cfs">
          <div class="dynamic-row"><input type="number" value="30000" class="irr-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="40000" class="irr-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="50000" class="irr-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
        </div>
        <button class="add-btn" onclick="addCF('irr-cfs','irr-cf',30000)">+ Add Year</button>
        <button class="calc-btn" onclick="calcIRR()">Solve IRR</button>
        <div class="result-box" id="irr-result"><span class="result-label">Awaiting computation…</span></div>
      </div>
    </div>

    <!-- FV / Compound Interest -->
    <div class="card" data-cat="valuation">
      <div class="card-head"><h3>Future Value / Compound Interest</h3><div class="formula-tag">FV = PV(1+r/n)^(nt)</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Present Value</label><input type="number" id="fv-pv" value="10000"></div>
          <div class="input-group"><label>Rate (%)</label><input type="number" id="fv-rate" value="7" step="0.1"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Years</label><input type="number" id="fv-years" value="10"></div>
          <div class="input-group"><label>Compounds/Year</label><input type="number" id="fv-n" value="12"></div>
        </div>
        <button class="calc-btn" onclick="calcFV()">Compute Future Value</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Future Value</div><div class="mr-value" id="fv-fv">—</div></div>
          <div class="mini-result"><div class="mr-label">Total Interest</div><div class="mr-value" id="fv-int">—</div></div>
          <div class="mini-result"><div class="mr-label">Effective Rate</div><div class="mr-value" id="fv-eff">—</div></div>
          <div class="mini-result"><div class="mr-label">Growth Multiple</div><div class="mr-value" id="fv-mult">—</div></div>
        </div>
      </div>
    </div>

    <!-- PV -->
    <div class="card" data-cat="valuation">
      <div class="card-head"><h3>Present Value</h3><div class="formula-tag">PV = FV/(1+r/n)^(nt)</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Future Value</label><input type="number" id="pv-fv" value="50000"></div>
          <div class="input-group"><label>Rate (%)</label><input type="number" id="pv-rate" value="6" step="0.1"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Years</label><input type="number" id="pv-years" value="10"></div>
          <div class="input-group"><label>Compounds/Year</label><input type="number" id="pv-n" value="1"></div>
        </div>
        <button class="calc-btn" onclick="calcPV()">Compute Present Value</button>
        <div class="result-box" id="pv-result"><span class="result-label">Awaiting computation…</span></div>
      </div>
    </div>

    <!-- DCF -->
    <div class="card" data-cat="valuation">
      <div class="card-head"><h3>DCF Valuation</h3><div class="formula-tag">V = Σ FCF/(1+r)ᵗ + TV</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>WACC (%)</label><input type="number" id="dcf-wacc" value="10" step="0.1"></div>
          <div class="input-group"><label>Terminal Growth (%)</label><input type="number" id="dcf-tg" value="2.5" step="0.1"></div>
        </div>
        <label style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--text-dim);font-family:'JetBrains Mono',monospace;margin-bottom:4px;display:block">Projected Free Cash Flows</label>
        <div class="dynamic-inputs" id="dcf-cfs">
          <div class="dynamic-row"><input type="number" value="500000" class="dcf-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="600000" class="dcf-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="720000" class="dcf-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="860000" class="dcf-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="1000000" class="dcf-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
        </div>
        <button class="add-btn" onclick="addCF('dcf-cfs','dcf-cf',500000)">+ Add Year</button>
        <button class="calc-btn" onclick="calcDCF()">Run DCF Model</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">PV of Cash Flows</div><div class="mr-value" id="dcf-pvcf">—</div></div>
          <div class="mini-result"><div class="mr-label">Terminal Value</div><div class="mr-value" id="dcf-tv">—</div></div>
          <div class="mini-result"><div class="mr-label">PV of Terminal</div><div class="mr-value" id="dcf-pvtv">—</div></div>
          <div class="mini-result"><div class="mr-label">Enterprise Value</div><div class="mr-value" id="dcf-ev">—</div></div>
        </div>
      </div>
    </div>

    <!-- Annuity -->
    <div class="card" data-cat="valuation">
      <div class="card-head"><h3>Annuity Calculator</h3><div class="formula-tag">PV = PMT×[1-(1+r)⁻ⁿ]/r</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Payment (PMT)</label><input type="number" id="ann-pmt" value="1000"></div>
          <div class="input-group"><label>Rate (%)</label><input type="number" id="ann-rate" value="5" step="0.1"></div>
          <div class="input-group"><label>Periods</label><input type="number" id="ann-n" value="20"></div>
        </div>
        <button class="calc-btn" onclick="calcAnnuity()">Compute Annuity</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">PV (Ordinary)</div><div class="mr-value" id="ann-pv">—</div></div>
          <div class="mini-result"><div class="mr-label">PV (Due)</div><div class="mr-value" id="ann-pvdue">—</div></div>
          <div class="mini-result"><div class="mr-label">FV (Ordinary)</div><div class="mr-value" id="ann-fv">—</div></div>
          <div class="mini-result"><div class="mr-label">FV (Due)</div><div class="mr-value" id="ann-fvdue">—</div></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== CORPORATE FINANCE ========== -->
  <div class="section-header"><h2>Corporate Finance</h2><div class="line"></div><div class="tag">Enterprise</div></div>
  <div class="card-grid">

    <!-- WACC -->
    <div class="card" data-cat="corporate">
      <div class="card-head"><h3>WACC</h3><div class="formula-tag">WACC = E/V×Re + D/V×Rd×(1-T)</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Equity (E)</label><input type="number" id="wacc-e" value="6000000"></div>
          <div class="input-group"><label>Debt (D)</label><input type="number" id="wacc-d" value="4000000"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Cost of Equity (%)</label><input type="number" id="wacc-re" value="12" step="0.1"></div>
          <div class="input-group"><label>Cost of Debt (%)</label><input type="number" id="wacc-rd" value="6" step="0.1"></div>
          <div class="input-group"><label>Tax Rate (%)</label><input type="number" id="wacc-tax" value="21" step="0.1"></div>
        </div>
        <button class="calc-btn" onclick="calcWACC()">Compute WACC</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">WACC</div><div class="mr-value" id="wacc-val">—</div></div>
          <div class="mini-result"><div class="mr-label">E/V Weight</div><div class="mr-value" id="wacc-ew">—</div></div>
          <div class="mini-result"><div class="mr-label">D/V Weight</div><div class="mr-value" id="wacc-dw">—</div></div>
          <div class="mini-result"><div class="mr-label">After-Tax Debt</div><div class="mr-value" id="wacc-atd">—</div></div>
        </div>
      </div>
    </div>

    <!-- CAPM -->
    <div class="card" data-cat="corporate">
      <div class="card-head"><h3>CAPM</h3><div class="formula-tag">E(R) = Rf + β(Rm - Rf)</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Risk-Free Rate (%)</label><input type="number" id="capm-rf" value="4.5" step="0.1"></div>
          <div class="input-group"><label>Market Return (%)</label><input type="number" id="capm-rm" value="10" step="0.1"></div>
          <div class="input-group"><label>Beta (β)</label><input type="number" id="capm-beta" value="1.2" step="0.01"></div>
        </div>
        <button class="calc-btn" onclick="calcCAPM()">Compute Expected Return</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Expected Return</div><div class="mr-value" id="capm-er">—</div></div>
          <div class="mini-result"><div class="mr-label">Risk Premium</div><div class="mr-value" id="capm-rp">—</div></div>
          <div class="mini-result"><div class="mr-label">Market Premium</div><div class="mr-value" id="capm-mp">—</div></div>
          <div class="mini-result"><div class="mr-label">Alpha Zone</div><div class="mr-value" id="capm-az">—</div></div>
        </div>
      </div>
    </div>

    <!-- ROI / ROE / ROA -->
    <div class="card" data-cat="corporate">
      <div class="card-head"><h3>Return Metrics</h3><div class="formula-tag">ROI / ROE / ROA</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Net Profit</label><input type="number" id="roi-profit" value="250000"></div>
          <div class="input-group"><label>Investment Cost</label><input type="number" id="roi-cost" value="1000000"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Total Equity</label><input type="number" id="roi-equity" value="2000000"></div>
          <div class="input-group"><label>Total Assets</label><input type="number" id="roi-assets" value="5000000"></div>
        </div>
        <button class="calc-btn" onclick="calcROI()">Compute Returns</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">ROI</div><div class="mr-value" id="roi-roi">—</div></div>
          <div class="mini-result"><div class="mr-label">ROE</div><div class="mr-value" id="roi-roe">—</div></div>
          <div class="mini-result"><div class="mr-label">ROA</div><div class="mr-value" id="roi-roa">—</div></div>
          <div class="mini-result"><div class="mr-label">Equity Multiplier</div><div class="mr-value" id="roi-em">—</div></div>
        </div>
      </div>
    </div>

    <!-- Payback Period -->
    <div class="card" data-cat="corporate">
      <div class="card-head"><h3>Payback Period</h3><div class="formula-tag">PP & Discounted PP</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Initial Investment</label><input type="number" id="pp-init" value="200000"></div>
          <div class="input-group"><label>Discount Rate (%)</label><input type="number" id="pp-rate" value="8" step="0.1"></div>
        </div>
        <label style="font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--text-dim);font-family:'JetBrains Mono',monospace;margin-bottom:4px;display:block">Annual Cash Flows</label>
        <div class="dynamic-inputs" id="pp-cfs">
          <div class="dynamic-row"><input type="number" value="50000" class="pp-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="60000" class="pp-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="70000" class="pp-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
          <div class="dynamic-row"><input type="number" value="80000" class="pp-cf"><button class="remove-btn" onclick="this.parentElement.remove()">×</button></div>
        </div>
        <button class="add-btn" onclick="addCF('pp-cfs','pp-cf',50000)">+ Add Year</button>
        <button class="calc-btn" onclick="calcPayback()">Compute Payback</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Simple Payback</div><div class="mr-value" id="pp-simple">—</div></div>
          <div class="mini-result"><div class="mr-label">Discounted Payback</div><div class="mr-value" id="pp-disc">—</div></div>
        </div>
      </div>
    </div>

    <!-- Leverage Ratios -->
    <div class="card" data-cat="corporate">
      <div class="card-head"><h3>Leverage & Liquidity</h3><div class="formula-tag">D/E, Current, Quick</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Total Debt</label><input type="number" id="lev-debt" value="3000000"></div>
          <div class="input-group"><label>Total Equity</label><input type="number" id="lev-equity" value="5000000"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Current Assets</label><input type="number" id="lev-ca" value="2000000"></div>
          <div class="input-group"><label>Current Liabilities</label><input type="number" id="lev-cl" value="1200000"></div>
          <div class="input-group"><label>Inventory</label><input type="number" id="lev-inv" value="500000"></div>
        </div>
        <button class="calc-btn" onclick="calcLeverage()">Compute Ratios</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Debt/Equity</div><div class="mr-value" id="lev-de">—</div></div>
          <div class="mini-result"><div class="mr-label">Debt Ratio</div><div class="mr-value" id="lev-dr">—</div></div>
          <div class="mini-result"><div class="mr-label">Current Ratio</div><div class="mr-value" id="lev-cr">—</div></div>
          <div class="mini-result"><div class="mr-label">Quick Ratio</div><div class="mr-value" id="lev-qr">—</div></div>
        </div>
      </div>
    </div>

    <!-- EPS & P/E -->
    <div class="card" data-cat="corporate">
      <div class="card-head"><h3>EPS & P/E Valuation</h3><div class="formula-tag">EPS, P/E, PEG</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Net Income</label><input type="number" id="eps-ni" value="5000000"></div>
          <div class="input-group"><label>Shares Outstanding</label><input type="number" id="eps-shares" value="1000000"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Share Price</label><input type="number" id="eps-price" value="45"></div>
          <div class="input-group"><label>Growth Rate (%)</label><input type="number" id="eps-growth" value="15" step="0.1"></div>
        </div>
        <button class="calc-btn" onclick="calcEPS()">Compute Metrics</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">EPS</div><div class="mr-value" id="eps-eps">—</div></div>
          <div class="mini-result"><div class="mr-label">P/E Ratio</div><div class="mr-value" id="eps-pe">—</div></div>
          <div class="mini-result"><div class="mr-label">PEG Ratio</div><div class="mr-value" id="eps-peg">—</div></div>
          <div class="mini-result"><div class="mr-label">Earnings Yield</div><div class="mr-value" id="eps-ey">—</div></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== DERIVATIVES ========== -->
  <div class="section-header"><h2>Derivatives & Options</h2><div class="line"></div><div class="tag">Advanced</div></div>
  <div class="card-grid">

    <!-- Black-Scholes -->
    <div class="card" data-cat="derivatives">
      <div class="card-head"><h3>Black-Scholes Model</h3><div class="formula-tag">C = S·N(d₁) - K·e⁻ʳᵗ·N(d₂)</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Stock Price (S)</label><input type="number" id="bs-s" value="100"></div>
          <div class="input-group"><label>Strike Price (K)</label><input type="number" id="bs-k" value="105"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Time to Expiry (Yrs)</label><input type="number" id="bs-t" value="0.5" step="0.01"></div>
          <div class="input-group"><label>Risk-Free Rate (%)</label><input type="number" id="bs-r" value="5" step="0.1"></div>
          <div class="input-group"><label>Volatility (%)</label><input type="number" id="bs-v" value="25" step="0.1"></div>
        </div>
        <button class="calc-btn" onclick="calcBS()">Price Options</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Call Price</div><div class="mr-value" id="bs-call">—</div></div>
          <div class="mini-result"><div class="mr-label">Put Price</div><div class="mr-value" id="bs-put">—</div></div>
          <div class="mini-result"><div class="mr-label">d₁</div><div class="mr-value" id="bs-d1">—</div></div>
          <div class="mini-result"><div class="mr-label">d₂</div><div class="mr-value" id="bs-d2">—</div></div>
        </div>
      </div>
    </div>

    <!-- Greeks -->
    <div class="card" data-cat="derivatives">
      <div class="card-head"><h3>Option Greeks</h3><div class="formula-tag">Δ Γ Θ ν ρ</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Stock Price</label><input type="number" id="gr-s" value="100"></div>
          <div class="input-group"><label>Strike</label><input type="number" id="gr-k" value="100"></div>
          <div class="input-group"><label>Time (Yrs)</label><input type="number" id="gr-t" value="0.25" step="0.01"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Rate (%)</label><input type="number" id="gr-r" value="5" step="0.1"></div>
          <div class="input-group"><label>Volatility (%)</label><input type="number" id="gr-v" value="20" step="0.1"></div>
        </div>
        <button class="calc-btn" onclick="calcGreeks()">Compute Greeks</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Delta (Δ)</div><div class="mr-value" id="gr-delta">—</div></div>
          <div class="mini-result"><div class="mr-label">Gamma (Γ)</div><div class="mr-value" id="gr-gamma">—</div></div>
          <div class="mini-result"><div class="mr-label">Theta (Θ)</div><div class="mr-value" id="gr-theta">—</div></div>
          <div class="mini-result"><div class="mr-label">Vega (ν)</div><div class="mr-value" id="gr-vega">—</div></div>
        </div>
      </div>
    </div>

    <!-- Put-Call Parity -->
    <div class="card" data-cat="derivatives">
      <div class="card-head"><h3>Put-Call Parity</h3><div class="formula-tag">C + PV(K) = P + S</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Call Price</label><input type="number" id="pcp-c" value="10"></div>
          <div class="input-group"><label>Stock Price</label><input type="number" id="pcp-s" value="100"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Strike</label><input type="number" id="pcp-k" value="95"></div>
          <div class="input-group"><label>Rate (%)</label><input type="number" id="pcp-r" value="5" step="0.1"></div>
          <div class="input-group"><label>Time (Yrs)</label><input type="number" id="pcp-t" value="0.5" step="0.01"></div>
        </div>
        <button class="calc-btn" onclick="calcPutCall()">Solve Parity</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Implied Put</div><div class="mr-value" id="pcp-put">—</div></div>
          <div class="mini-result"><div class="mr-label">PV of Strike</div><div class="mr-value" id="pcp-pvk">—</div></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== DEBT ========== -->
  <div class="section-header"><h2>Debt & Fixed Income</h2><div class="line"></div><div class="tag">Bonds</div></div>
  <div class="card-grid">

    <!-- Bond Pricing -->
    <div class="card" data-cat="debt">
      <div class="card-head"><h3>Bond Pricing</h3><div class="formula-tag">P = Σ C/(1+r)ᵗ + F/(1+r)ⁿ</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Face Value</label><input type="number" id="bond-face" value="1000"></div>
          <div class="input-group"><label>Coupon Rate (%)</label><input type="number" id="bond-coupon" value="5" step="0.1"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>YTM (%)</label><input type="number" id="bond-ytm" value="6" step="0.1"></div>
          <div class="input-group"><label>Years to Maturity</label><input type="number" id="bond-years" value="10"></div>
          <div class="input-group"><label>Payments/Year</label><input type="number" id="bond-freq" value="2"></div>
        </div>
        <button class="calc-btn" onclick="calcBond()">Price Bond</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Bond Price</div><div class="mr-value" id="bond-price">—</div></div>
          <div class="mini-result"><div class="mr-label">Current Yield</div><div class="mr-value" id="bond-cy">—</div></div>
          <div class="mini-result"><div class="mr-label">Duration</div><div class="mr-value" id="bond-dur">—</div></div>
          <div class="mini-result"><div class="mr-label">Premium/Discount</div><div class="mr-value" id="bond-pd">—</div></div>
        </div>
      </div>
    </div>

    <!-- Loan Amortization -->
    <div class="card" data-cat="debt">
      <div class="card-head"><h3>Loan Amortization</h3><div class="formula-tag">PMT = P×r(1+r)ⁿ/((1+r)ⁿ-1)</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Loan Amount</label><input type="number" id="loan-amt" value="300000"></div>
          <div class="input-group"><label>Annual Rate (%)</label><input type="number" id="loan-rate" value="6.5" step="0.1"></div>
          <div class="input-group"><label>Term (Years)</label><input type="number" id="loan-term" value="30"></div>
        </div>
        <button class="calc-btn" onclick="calcLoan()">Compute Amortization</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Monthly Payment</div><div class="mr-value" id="loan-pmt">—</div></div>
          <div class="mini-result"><div class="mr-label">Total Paid</div><div class="mr-value" id="loan-total">—</div></div>
          <div class="mini-result"><div class="mr-label">Total Interest</div><div class="mr-value" id="loan-int">—</div></div>
          <div class="mini-result"><div class="mr-label">Interest/Principal</div><div class="mr-value" id="loan-ratio">—</div></div>
        </div>
      </div>
    </div>

    <!-- Yield to Maturity -->
    <div class="card" data-cat="debt">
      <div class="card-head"><h3>Yield to Maturity (Approx)</h3><div class="formula-tag">YTM ≈ [C+(F-P)/n]/[(F+P)/2]</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Face Value</label><input type="number" id="ytm-face" value="1000"></div>
          <div class="input-group"><label>Market Price</label><input type="number" id="ytm-price" value="950"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Coupon Rate (%)</label><input type="number" id="ytm-coupon" value="5" step="0.1"></div>
          <div class="input-group"><label>Years</label><input type="number" id="ytm-years" value="10"></div>
        </div>
        <button class="calc-btn" onclick="calcYTM()">Estimate YTM</button>
        <div class="result-box" id="ytm-result"><span class="result-label">Awaiting computation…</span></div>
      </div>
    </div>
  </div>

  <!-- ========== RISK ========== -->
  <div class="section-header"><h2>Risk & Portfolio</h2><div class="line"></div><div class="tag">Quantitative</div></div>
  <div class="card-grid">

    <!-- Sharpe Ratio -->
    <div class="card" data-cat="risk">
      <div class="card-head"><h3>Sharpe Ratio</h3><div class="formula-tag">S = (Rp - Rf) / σp</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Portfolio Return (%)</label><input type="number" id="sr-rp" value="12" step="0.1"></div>
          <div class="input-group"><label>Risk-Free Rate (%)</label><input type="number" id="sr-rf" value="4.5" step="0.1"></div>
          <div class="input-group"><label>Std Dev (%)</label><input type="number" id="sr-sd" value="18" step="0.1"></div>
        </div>
        <button class="calc-btn" onclick="calcSharpe()">Compute Sharpe</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Sharpe Ratio</div><div class="mr-value" id="sr-val">—</div></div>
          <div class="mini-result"><div class="mr-label">Excess Return</div><div class="mr-value" id="sr-er">—</div></div>
          <div class="mini-result"><div class="mr-label">Rating</div><div class="mr-value" id="sr-rating">—</div></div>
          <div class="mini-result"><div class="mr-label">Return/Risk</div><div class="mr-value" id="sr-rr">—</div></div>
        </div>
      </div>
    </div>

    <!-- VaR -->
    <div class="card" data-cat="risk">
      <div class="card-head"><h3>Value at Risk (VaR)</h3><div class="formula-tag">VaR = μ - Zα × σ</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Portfolio Value</label><input type="number" id="var-val" value="1000000"></div>
          <div class="input-group"><label>Expected Return (%)</label><input type="number" id="var-mu" value="8" step="0.1"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Volatility (%)</label><input type="number" id="var-sigma" value="15" step="0.1"></div>
          <div class="input-group"><label>Confidence</label>
            <select id="var-conf">
              <option value="1.645">95%</option>
              <option value="2.326" selected>99%</option>
              <option value="2.576">99.5%</option>
            </select>
          </div>
        </div>
        <button class="calc-btn" onclick="calcVaR()">Compute VaR</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Daily VaR</div><div class="mr-value" id="var-daily">—</div></div>
          <div class="mini-result"><div class="mr-label">Monthly VaR</div><div class="mr-value" id="var-monthly">—</div></div>
          <div class="mini-result"><div class="mr-label">Annual VaR</div><div class="mr-value" id="var-annual">—</div></div>
          <div class="mini-result"><div class="mr-label">Max Loss ($)</div><div class="mr-value" id="var-max">—</div></div>
        </div>
      </div>
    </div>

    <!-- Portfolio Variance (2-Asset) -->
    <div class="card" data-cat="risk">
      <div class="card-head"><h3>Portfolio Variance</h3><div class="formula-tag">σ²p = w₁²σ₁² + w₂²σ₂² + 2w₁w₂ρσ₁σ₂</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Weight A (%)</label><input type="number" id="pv-w1" value="60" step="1"></div>
          <div class="input-group"><label>σ Asset A (%)</label><input type="number" id="pv-s1" value="20" step="0.1"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Weight B (%)</label><input type="number" id="pv-w2" value="40" step="1"></div>
          <div class="input-group"><label>σ Asset B (%)</label><input type="number" id="pv-s2" value="30" step="0.1"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Correlation (ρ)</label><input type="number" id="pv-rho" value="0.3" step="0.01" min="-1" max="1"></div>
        </div>
        <button class="calc-btn" onclick="calcPortVar()">Compute Portfolio Risk</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Portfolio σ</div><div class="mr-value" id="pv-sigma">—</div></div>
          <div class="mini-result"><div class="mr-label">Portfolio σ²</div><div class="mr-value" id="pv-var">—</div></div>
          <div class="mini-result"><div class="mr-label">Diversification</div><div class="mr-value" id="pv-div">—</div></div>
          <div class="mini-result"><div class="mr-label">Covariance</div><div class="mr-value" id="pv-cov">—</div></div>
        </div>
      </div>
    </div>

    <!-- Beta Calculator -->
    <div class="card" data-cat="risk">
      <div class="card-head"><h3>Beta Calculator</h3><div class="formula-tag">β = Cov(Ri,Rm)/Var(Rm)</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Covariance (Asset,Market)</label><input type="number" id="beta-cov" value="0.0035" step="0.0001"></div>
          <div class="input-group"><label>Market Variance</label><input type="number" id="beta-var" value="0.0025" step="0.0001"></div>
        </div>
        <button class="calc-btn" onclick="calcBeta()">Compute Beta</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Beta</div><div class="mr-value" id="beta-val">—</div></div>
          <div class="mini-result"><div class="mr-label">Risk Profile</div><div class="mr-value" id="beta-prof">—</div></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ========== SIMULATION ========== -->
  <div class="section-header"><h2>Monte Carlo & Simulation</h2><div class="line"></div><div class="tag">Stochastic</div></div>
  <div class="card-grid">

    <!-- Monte Carlo -->
    <div class="card" data-cat="simulation" style="grid-column: span 2">
      <div class="card-head"><h3>Monte Carlo Stock Simulation</h3><div class="formula-tag">GBM: dS = μSdt + σSdW</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Initial Price</label><input type="number" id="mc-s0" value="100"></div>
          <div class="input-group"><label>Drift (μ %)</label><input type="number" id="mc-mu" value="8" step="0.1"></div>
          <div class="input-group"><label>Volatility (σ %)</label><input type="number" id="mc-sigma" value="25" step="0.1"></div>
          <div class="input-group"><label>Days</label><input type="number" id="mc-days" value="252"></div>
          <div class="input-group"><label>Simulations</label><input type="number" id="mc-sims" value="200"></div>
        </div>
        <button class="calc-btn" onclick="runMonteCarlo()">▶ Run Simulation</button>
        <canvas class="mc-canvas" id="mc-canvas"></canvas>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Mean Final</div><div class="mr-value" id="mc-mean">—</div></div>
          <div class="mini-result"><div class="mr-label">Median Final</div><div class="mr-value" id="mc-median">—</div></div>
          <div class="mini-result"><div class="mr-label">5th Percentile</div><div class="mr-value" id="mc-p5">—</div></div>
          <div class="mini-result"><div class="mr-label">95th Percentile</div><div class="mr-value" id="mc-p95">—</div></div>
        </div>
      </div>
    </div>

    <!-- Break-Even Analysis -->
    <div class="card" data-cat="simulation">
      <div class="card-head"><h3>Break-Even Analysis</h3><div class="formula-tag">BEP = FC / (P - VC)</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Fixed Costs</label><input type="number" id="be-fc" value="50000"></div>
          <div class="input-group"><label>Price per Unit</label><input type="number" id="be-price" value="25"></div>
          <div class="input-group"><label>Variable Cost/Unit</label><input type="number" id="be-vc" value="10"></div>
        </div>
        <button class="calc-btn" onclick="calcBreakEven()">Compute Break-Even</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">Break-Even Units</div><div class="mr-value" id="be-units">—</div></div>
          <div class="mini-result"><div class="mr-label">Break-Even $</div><div class="mr-value" id="be-revenue">—</div></div>
          <div class="mini-result"><div class="mr-label">Contrib. Margin</div><div class="mr-value" id="be-cm">—</div></div>
          <div class="mini-result"><div class="mr-label">CM Ratio</div><div class="mr-value" id="be-cmr">—</div></div>
        </div>
      </div>
    </div>

    <!-- Sensitivity Analysis -->
    <div class="card" data-cat="simulation">
      <div class="card-head"><h3>Scenario Builder</h3><div class="formula-tag">Best / Base / Worst</div></div>
      <div class="card-body">
        <div class="input-row">
          <div class="input-group"><label>Base Revenue</label><input type="number" id="sc-rev" value="1000000"></div>
          <div class="input-group"><label>Base Cost (%)</label><input type="number" id="sc-cost" value="65" step="1"></div>
        </div>
        <div class="input-row">
          <div class="input-group"><label>Bull Δ Revenue (%)</label><input type="number" id="sc-bull" value="25" step="1"></div>
          <div class="input-group"><label>Bear Δ Revenue (%)</label><input type="number" id="sc-bear" value="-20" step="1"></div>
        </div>
        <button class="calc-btn" onclick="calcScenario()">Run Scenarios</button>
        <div class="multi-result">
          <div class="mini-result"><div class="mr-label">🟢 Bull Profit</div><div class="mr-value" id="sc-bullp">—</div></div>
          <div class="mini-result"><div class="mr-label">🟡 Base Profit</div><div class="mr-value" id="sc-basep">—</div></div>
          <div class="mini-result"><div class="mr-label">🔴 Bear Profit</div><div class="mr-value" id="sc-bearp">—</div></div>
          <div class="mini-result"><div class="mr-label">Expected Value</div><div class="mr-value" id="sc-ev">—</div></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div style="text-align:center;padding:40px 0 20px;border-top:1px solid var(--border);margin-top:40px">
    <div style="font-family:'Cormorant Garamond',serif;font-size:18px;color:var(--gold-dim);letter-spacing:4px;text-transform:uppercase">Quantum Finance Engine</div>
    <div style="font-size:11px;color:var(--text-dim);margin-top:6px;letter-spacing:2px">24 MODELS · REAL-TIME COMPUTATION · SIMULATION READY</div>
  </div>
</div>

<script>
// ===== PARTICLES =====
const canvas = document.getElementById('particles');
const ctx = canvas.getContext('2d');
let particles = [];
function resizeCanvas(){canvas.width=window.innerWidth;canvas.height=window.innerHeight}
window.addEventListener('resize', resizeCanvas);
resizeCanvas();

class Particle{
  constructor(){this.reset()}
  reset(){this.x=Math.random()*canvas.width;this.y=Math.random()*canvas.height;this.size=Math.random()*1.5+0.5;this.speedX=(Math.random()-0.5)*0.3;this.speedY=(Math.random()-0.5)*0.3;this.opacity=Math.random()*0.5+0.1}
  update(){this.x+=this.speedX;this.y+=this.speedY;if(this.x<0||this.x>canvas.width||this.y<0||this.y>canvas.height)this.reset()}
  draw(){ctx.beginPath();ctx.arc(this.x,this.y,this.size,0,Math.PI*2);ctx.fillStyle=`rgba(212,169,52,${this.opacity})`;ctx.fill()}
}
for(let i=0;i<60;i++)particles.push(new Particle());
function animateParticles(){ctx.clearRect(0,0,canvas.width,canvas.height);particles.forEach(p=>{p.update();p.draw()});requestAnimationFrame(animateParticles)}
animateParticles();

// ===== HELPERS =====
const fmt = (n,d=2) => n.toLocaleString('en-US',{minimumFractionDigits:d,maximumFractionDigits:d});
const fmtD = (n) => '$'+fmt(n);
const fmtP = (n) => fmt(n)+'%';
const v = id => parseFloat(document.getElementById(id).value)||0;
function setR(id,html){const el=document.getElementById(id);el.innerHTML=html;el.classList.add('has-value')}
function setMR(id,val){document.getElementById(id).textContent=val}

function addCF(containerId, className, defaultVal){
  const container=document.getElementById(containerId);
  const row=document.createElement('div');row.className='dynamic-row';
  row.innerHTML=`<input type="number" value="${defaultVal}" class="${className}"><button class="remove-btn" onclick="this.parentElement.remove()">×</button>`;
  container.appendChild(row);
}
function getCFs(className){return [...document.querySelectorAll('.'+className)].map(el=>parseFloat(el.value)||0)}

// Normal CDF approximation
function normCDF(x){const a1=0.254829592,a2=-0.284496736,a3=1.421413741,a4=-1.453152027,a5=1.061405429,p=0.3275911;const sign=x<0?-1:1;x=Math.abs(x)/Math.sqrt(2);const t=1/(1+p*x);const y=1-((((a5*t+a4)*t+a3)*t+a2)*t+a1)*t*Math.exp(-x*x);return 0.5*(1+sign*y)}
function normPDF(x){return Math.exp(-0.5*x*x)/Math.sqrt(2*Math.PI)}

// ===== NPV =====
function calcNPV(){
  const r=v('npv-rate')/100, init=v('npv-init'), cfs=getCFs('npv-cf');
  let npv=-init;
  cfs.forEach((cf,i)=>npv+=cf/Math.pow(1+r,i+1));
  setR('npv-result',`<span class="result-label">NPV</span><span class="result-value">${fmtD(npv)}</span>`);
}

// ===== IRR (Newton's method) =====
function calcIRR(){
  const init=v('irr-init'),cfs=getCFs('irr-cf');
  let irr=0.1;
  for(let iter=0;iter<1000;iter++){
    let npv=-init,dnpv=0;
    cfs.forEach((cf,i)=>{npv+=cf/Math.pow(1+irr,i+1);dnpv-=(i+1)*cf/Math.pow(1+irr,i+2)});
    const newIrr=irr-npv/dnpv;
    if(Math.abs(newIrr-irr)<1e-10)break;
    irr=newIrr;
  }
  setR('irr-result',`<span class="result-label">IRR</span><span class="result-value">${fmtP(irr*100)}</span>`);
}

// ===== Future Value =====
function calcFV(){
  const pv=v('fv-pv'),r=v('fv-rate')/100,y=v('fv-years'),n=v('fv-n');
  const fv=pv*Math.pow(1+r/n,n*y);
  const eff=(Math.pow(1+r/n,n)-1)*100;
  setMR('fv-fv',fmtD(fv));setMR('fv-int',fmtD(fv-pv));setMR('fv-eff',fmtP(eff));setMR('fv-mult',fmt(fv/pv)+'×');
}

// ===== Present Value =====
function calcPV(){
  const fv=v('pv-fv'),r=v('pv-rate')/100,y=v('pv-years'),n=v('pv-n');
  const pv=fv/Math.pow(1+r/n,n*y);
  setR('pv-result',`<span class="result-label">PV</span><span class="result-value">${fmtD(pv)}</span>`);
}

// ===== DCF =====
function calcDCF(){
  const wacc=v('dcf-wacc')/100,tg=v('dcf-tg')/100,cfs=getCFs('dcf-cf');
  let pvCF=0;
  cfs.forEach((cf,i)=>pvCF+=cf/Math.pow(1+wacc,i+1));
  const lastCF=cfs[cfs.length-1]||0;
  const tv=lastCF*(1+tg)/(wacc-tg);
  const pvTV=tv/Math.pow(1+wacc,cfs.length);
  setMR('dcf-pvcf',fmtD(pvCF));setMR('dcf-tv',fmtD(tv));setMR('dcf-pvtv',fmtD(pvTV));setMR('dcf-ev',fmtD(pvCF+pvTV));
}

// ===== Annuity =====
function calcAnnuity(){
  const pmt=v('ann-pmt'),r=v('ann-rate')/100,n=v('ann-n');
  const pvOrd=pmt*(1-Math.pow(1+r,-n))/r;
  const pvDue=pvOrd*(1+r);
  const fvOrd=pmt*(Math.pow(1+r,n)-1)/r;
  const fvDue=fvOrd*(1+r);
  setMR('ann-pv',fmtD(pvOrd));setMR('ann-pvdue',fmtD(pvDue));setMR('ann-fv',fmtD(fvOrd));setMR('ann-fvdue',fmtD(fvDue));
}

// ===== WACC =====
function calcWACC(){
  const E=v('wacc-e'),D=v('wacc-d'),Re=v('wacc-re')/100,Rd=v('wacc-rd')/100,T=v('wacc-tax')/100;
  const V=E+D,wE=E/V,wD=D/V;
  const wacc=wE*Re+wD*Rd*(1-T);
  setMR('wacc-val',fmtP(wacc*100));setMR('wacc-ew',fmtP(wE*100));setMR('wacc-dw',fmtP(wD*100));setMR('wacc-atd',fmtP(Rd*(1-T)*100));
}

// ===== CAPM =====
function calcCAPM(){
  const rf=v('capm-rf')/100,rm=v('capm-rm')/100,beta=v('capm-beta');
  const er=rf+beta*(rm-rf);
  const mp=rm-rf,rp=beta*mp;
  setMR('capm-er',fmtP(er*100));setMR('capm-rp',fmtP(rp*100));setMR('capm-mp',fmtP(mp*100));
  setMR('capm-az',beta>1?'Aggressive':'Conservative');
}

// ===== ROI =====
function calcROI(){
  const profit=v('roi-profit'),cost=v('roi-cost'),eq=v('roi-equity'),assets=v('roi-assets');
  setMR('roi-roi',fmtP(profit/cost*100));setMR('roi-roe',fmtP(profit/eq*100));setMR('roi-roa',fmtP(profit/assets*100));setMR('roi-em',fmt(assets/eq)+'×');
}

// ===== Payback =====
function calcPayback(){
  const init=v('pp-init'),r=v('pp-rate')/100,cfs=getCFs('pp-cf');
  let cumul=0,simple='Never',cumDisc=0,disc='Never';
  for(let i=0;i<cfs.length;i++){
    const prev=cumul;cumul+=cfs[i];
    if(prev<init&&cumul>=init){simple=fmt(i+(init-prev)/cfs[i],2)+' yrs'}
    const dcf=cfs[i]/Math.pow(1+r,i+1);const prevD=cumDisc;cumDisc+=dcf;
    if(prevD<init&&cumDisc>=init){disc=fmt(i+(init-prevD)/dcf,2)+' yrs'}
  }
  setMR('pp-simple',simple);setMR('pp-disc',disc);
}

// ===== Leverage =====
function calcLeverage(){
  const d=v('lev-debt'),e=v('lev-equity'),ca=v('lev-ca'),cl=v('lev-cl'),inv=v('lev-inv');
  setMR('lev-de',fmt(d/e));setMR('lev-dr',fmtP(d/(d+e)*100));setMR('lev-cr',fmt(ca/cl));setMR('lev-qr',fmt((ca-inv)/cl));
}

// ===== EPS =====
function calcEPS(){
  const ni=v('eps-ni'),shares=v('eps-shares'),price=v('eps-price'),g=v('eps-growth');
  const eps=ni/shares,pe=price/eps,peg=pe/g,ey=eps/price*100;
  setMR('eps-eps',fmtD(eps));setMR('eps-pe',fmt(pe)+'×');setMR('eps-peg',fmt(peg));setMR('eps-ey',fmtP(ey));
}

// ===== Black-Scholes =====
function calcBS(){
  const S=v('bs-s'),K=v('bs-k'),T=v('bs-t'),r=v('bs-r')/100,sigma=v('bs-v')/100;
  const d1=(Math.log(S/K)+(r+sigma*sigma/2)*T)/(sigma*Math.sqrt(T));
  const d2=d1-sigma*Math.sqrt(T);
  const call=S*normCDF(d1)-K*Math.exp(-r*T)*normCDF(d2);
  const put=K*Math.exp(-r*T)*normCDF(-d2)-S*normCDF(-d1);
  setMR('bs-call',fmtD(call));setMR('bs-put',fmtD(put));setMR('bs-d1',fmt(d1,4));setMR('bs-d2',fmt(d2,4));
}

// ===== Greeks =====
function calcGreeks(){
  const S=v('gr-s'),K=v('gr-k'),T=v('gr-t'),r=v('gr-r')/100,sigma=v('gr-v')/100;
  const d1=(Math.log(S/K)+(r+sigma*sigma/2)*T)/(sigma*Math.sqrt(T));
  const d2=d1-sigma*Math.sqrt(T);
  const delta=normCDF(d1);
  const gamma=normPDF(d1)/(S*sigma*Math.sqrt(T));
  const theta=(-S*normPDF(d1)*sigma/(2*Math.sqrt(T))-r*K*Math.exp(-r*T)*normCDF(d2))/365;
  const vega=S*normPDF(d1)*Math.sqrt(T)/100;
  setMR('gr-delta',fmt(delta,4));setMR('gr-gamma',fmt(gamma,4));setMR('gr-theta',fmt(theta,4));setMR('gr-vega',fmt(vega,4));
}

// ===== Put-Call Parity =====
function calcPutCall(){
  const C=v('pcp-c'),S=v('pcp-s'),K=v('pcp-k'),r=v('pcp-r')/100,T=v('pcp-t');
  const pvK=K*Math.exp(-r*T);
  const P=C+pvK-S;
  setMR('pcp-put',fmtD(P));setMR('pcp-pvk',fmtD(pvK));
}

// ===== Bond Pricing =====
function calcBond(){
  const F=v('bond-face'),c=v('bond-coupon')/100,ytm=v('bond-ytm')/100,years=v('bond-years'),freq=v('bond-freq');
  const n=years*freq,r=ytm/freq,coupon=F*c/freq;
  let price=0,dur=0;
  for(let t=1;t<=n;t++){const pv=coupon/Math.pow(1+r,t);price+=pv;dur+=t*pv}
  const pvFace=F/Math.pow(1+r,n);price+=pvFace;dur+=n*pvFace;dur=dur/(price*freq);
  const cy=F*c/price*100;
  setMR('bond-price',fmtD(price));setMR('bond-cy',fmtP(cy));setMR('bond-dur',fmt(dur)+' yrs');
  setMR('bond-pd',price>F?'Premium':'Discount');
}

// ===== Loan Amortization =====
function calcLoan(){
  const P=v('loan-amt'),r=v('loan-rate')/100/12,n=v('loan-term')*12;
  const pmt=P*r*Math.pow(1+r,n)/(Math.pow(1+r,n)-1);
  const total=pmt*n;
  setMR('loan-pmt',fmtD(pmt));setMR('loan-total',fmtD(total));setMR('loan-int',fmtD(total-P));setMR('loan-ratio',fmt((total-P)/P*100)+'%');
}

// ===== YTM =====
function calcYTM(){
  const F=v('ytm-face'),P=v('ytm-price'),c=v('ytm-coupon')/100,n=v('ytm-years');
  const C=F*c;
  const ytm=(C+(F-P)/n)/((F+P)/2)*100;
  setR('ytm-result',`<span class="result-label">Approx YTM</span><span class="result-value">${fmtP(ytm)}</span>`);
}

// ===== Sharpe =====
function calcSharpe(){
  const rp=v('sr-rp'),rf=v('sr-rf'),sd=v('sr-sd');
  const sharpe=(rp-rf)/sd;
  let rating='Poor';if(sharpe>=1)rating='Good';if(sharpe>=2)rating='Excellent';if(sharpe>=3)rating='Exceptional';
  setMR('sr-val',fmt(sharpe,3));setMR('sr-er',fmtP(rp-rf));setMR('sr-rating',rating);setMR('sr-rr',fmt(rp/sd,3));
}

// ===== VaR =====
function calcVaR(){
  const val=v('var-val'),mu=v('var-mu')/100,sigma=v('var-sigma')/100,z=parseFloat(document.getElementById('var-conf').value);
  const dailySigma=sigma/Math.sqrt(252);
  const dailyVaR=val*(z*dailySigma-mu/252);
  const monthlyVaR=val*(z*sigma*Math.sqrt(21/252)-mu*21/252);
  const annualVaR=val*(z*sigma-mu);
  setMR('var-daily',fmtD(dailyVaR));setMR('var-monthly',fmtD(monthlyVaR));setMR('var-annual',fmtD(annualVaR));setMR('var-max',fmtD(annualVaR));
}

// ===== Portfolio Variance =====
function calcPortVar(){
  const w1=v('pv-w1')/100,w2=v('pv-w2')/100,s1=v('pv-s1')/100,s2=v('pv-s2')/100,rho=v('pv-rho');
  const cov=rho*s1*s2;
  const portVar=w1*w1*s1*s1+w2*w2*s2*s2+2*w1*w2*cov;
  const portSigma=Math.sqrt(portVar);
  const waSigma=w1*s1+w2*s2;
  const divBenefit=(1-portSigma/waSigma)*100;
  setMR('pv-sigma',fmtP(portSigma*100));setMR('pv-var',fmt(portVar*10000,4));setMR('pv-div',fmtP(divBenefit));setMR('pv-cov',fmt(cov*10000,4));
}

// ===== Beta =====
function calcBeta(){
  const cov=v('beta-cov'),variance=v('beta-var');
  const beta=cov/variance;
  let prof='Market-neutral';if(beta>1.2)prof='High-risk Aggressive';else if(beta>1)prof='Slightly Aggressive';else if(beta<0.8)prof='Defensive';else if(beta<1)prof='Slightly Defensive';
  setMR('beta-val',fmt(beta,3));setMR('beta-prof',prof);
}

// ===== Monte Carlo =====
function runMonteCarlo(){
  const S0=v('mc-s0'),mu=v('mc-mu')/100,sigma=v('mc-sigma')/100,days=v('mc-days'),sims=v('mc-sims');
  const dt=1/252;
  const cv=document.getElementById('mc-canvas');
  const c=cv.getContext('2d');
  cv.width=cv.offsetWidth*2;cv.height=cv.offsetHeight*2;
  c.scale(2,2);
  const W=cv.offsetWidth,H=cv.offsetHeight;
  c.fillStyle='#0A0A0A';c.fillRect(0,0,W,H);

  let allFinals=[],paths=[];
  for(let s=0;s<sims;s++){
    let price=S0,path=[S0];
    for(let d=0;d<days;d++){
      const z=Math.sqrt(-2*Math.log(Math.random()))*Math.cos(2*Math.PI*Math.random());
      price*=Math.exp((mu-0.5*sigma*sigma)*dt+sigma*Math.sqrt(dt)*z);
      path.push(price);
    }
    paths.push(path);
    allFinals.push(price);
  }

  allFinals.sort((a,b)=>a-b);
  const minP=Math.min(...allFinals)*0.9, maxP=Math.max(...allFinals)*1.05;
  const padL=10,padR=10,padT=10,padB=20;

  paths.forEach((path,idx)=>{
    c.beginPath();
    c.strokeStyle=`rgba(212,169,52,${Math.max(0.03,0.15-sims/5000)})`;
    c.lineWidth=0.5;
    path.forEach((p,i)=>{
      const x=padL+i/(days)*(W-padL-padR);
      const y=padT+(1-(p-minP)/(maxP-minP))*(H-padT-padB);
      i===0?c.moveTo(x,y):c.lineTo(x,y);
    });
    c.stroke();
  });

  // Median path
  const medianIdx=Math.floor(sims/2);
  const sorted=[...paths].sort((a,b)=>a[a.length-1]-b[b.length-1]);
  c.beginPath();c.strokeStyle='#D4A934';c.lineWidth=2;
  sorted[medianIdx].forEach((p,i)=>{
    const x=padL+i/days*(W-padL-padR);
    const y=padT+(1-(p-minP)/(maxP-minP))*(H-padT-padB);
    i===0?c.moveTo(x,y):c.lineTo(x,y);
  });c.stroke();

  const mean=allFinals.reduce((a,b)=>a+b)/sims;
  const median=allFinals[Math.floor(sims/2)];
  const p5=allFinals[Math.floor(sims*0.05)];
  const p95=allFinals[Math.floor(sims*0.95)];
  setMR('mc-mean',fmtD(mean));setMR('mc-median',fmtD(median));setMR('mc-p5',fmtD(p5));setMR('mc-p95',fmtD(p95));
}

// ===== Break-Even =====
function calcBreakEven(){
  const fc=v('be-fc'),p=v('be-price'),vc=v('be-vc');
  const cm=p-vc, units=fc/cm, rev=units*p, cmr=cm/p*100;
  setMR('be-units',fmt(units,0));setMR('be-revenue',fmtD(rev));setMR('be-cm',fmtD(cm));setMR('be-cmr',fmtP(cmr));
}

// ===== Scenario =====
function calcScenario(){
  const rev=v('sc-rev'),cost=v('sc-cost')/100,bull=v('sc-bull')/100,bear=v('sc-bear')/100;
  const bullR=rev*(1+bull),bearR=rev*(1+bear);
  const bullP=bullR*(1-cost),baseP=rev*(1-cost),bearP=bearR*(1-cost);
  const ev=(bullP*0.25+baseP*0.5+bearP*0.25);
  setMR('sc-bullp',fmtD(bullP));setMR('sc-basep',fmtD(baseP));setMR('sc-bearp',fmtD(bearP));setMR('sc-ev',fmtD(ev));
}

// ===== Filter =====
function filterCards(cat){
  document.querySelectorAll('.topbar-nav button').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
  document.querySelectorAll('.card').forEach(card=>{
    if(cat==='all'||card.dataset.cat===cat){card.style.display=''}
    else{card.style.display='none'}
  });
  document.querySelectorAll('.section-header').forEach(h=>h.style.display=cat==='all'?'':'none');
}

// ========================================
// PWA: Service Worker Registration
// ========================================
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./sw.js')
      .then(reg => {
        console.log('[PWA] Service Worker registered, scope:', reg.scope);
        // Check for updates periodically
        setInterval(() => reg.update(), 60 * 60 * 1000); // hourly
      })
      .catch(err => console.log('[PWA] SW registration failed:', err));
  });
}

// ========================================
// PWA: Install Prompt
// ========================================
let deferredPrompt = null;

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  // Show install banner after a short delay
  setTimeout(() => {
    const banner = document.getElementById('pwaBanner');
    if (banner && !localStorage.getItem('pwa-dismissed')) {
      banner.style.display = 'flex';
    }
  }, 3000);
});

function installPWA() {
  if (!deferredPrompt) return;
  deferredPrompt.prompt();
  deferredPrompt.userChoice.then(result => {
    console.log('[PWA] Install choice:', result.outcome);
    deferredPrompt = null;
    document.getElementById('pwaBanner').style.display = 'none';
  });
}

function dismissInstall() {
  document.getElementById('pwaBanner').style.display = 'none';
  // Don't show again for this session
  try { localStorage.setItem('pwa-dismissed', 'true'); } catch(e) {}
}

window.addEventListener('appinstalled', () => {
  console.log('[PWA] App installed successfully');
  document.getElementById('pwaBanner').style.display = 'none';
  deferredPrompt = null;
});

// ========================================
// PWA: Offline / Online Detection
// ========================================
const offlineBar = document.getElementById('offlineBar');

function updateOnlineStatus() {
  if (!navigator.onLine) {
    offlineBar.classList.add('show');
    // Adjust top bar position
    document.querySelector('.topbar').style.top = '28px';
  } else {
    offlineBar.classList.remove('show');
    document.querySelector('.topbar').style.top = '0';
  }
}

window.addEventListener('online', updateOnlineStatus);
window.addEventListener('offline', updateOnlineStatus);
updateOnlineStatus(); // check on load
</script>
</body>
</html>
